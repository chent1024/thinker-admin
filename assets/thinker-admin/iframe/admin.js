/** thinker-admin-v1.0.0 MIT License By http://www.thinkphp-admin.com/ */
 ;layui.define(["element"],function(e){var a=layui.jquery,i=layui.thinkeradmin,n=layui.laytpl,t=layui.element,l=layui.device(),r=a(window),o=a("body"),s=a(i.container.id),u="layui-icon-shrink-right",d="layui-icon-spread-left",c="thinkeradmin-side-spread-sm",y="thinkeradmin-side-shrink",m="thinkeradmin-tabsbody-item",h={on:function(e,a){return layui.onevent.call(this,i.eventName,e,a)},screen:function(){var e=r.width();return e>1200?3:e>992?2:e>768?1:0},sideFlexible:function(e){var n=a(document).find(i.container.menuIcon),t=h.screen();e?(n.removeClass(d).addClass(u),t<2?s.addClass(c):s.removeClass(c),s.removeClass(y)):(n.removeClass(u).addClass(d),t<2?s.removeClass(y):s.addClass(y),s.removeClass(c)),layui.event.call(this,i.eventName,"menu({*})",{status:e})},resizeTableOnWindowChange:function(e){var n=function(){a(i.container.body).find(".layui-table-view").each(function(){var e=a(this).attr("lay-id");layui.table.resize(e)})};layui.table&&(e?setTimeout(n,e):n())},theme:function(e){var i=layui.session.get("theme")||{},t="thinkerAdmin_theme",l=document.createElement("style");e=a.extend({},i,e);var r=n([".layui-side-menu,",".thinkeradmin-side-shrink .layui-side-menu .layui-nav>.layui-nav-item>.layui-nav-child","{background-color:{{d.color.main}} !important;}",".thinkeradmin-pagetabs .layui-tab-title li:after,",".thinkeradmin-pagetabs .layui-tab-title li.layui-this:after,",".layui-layer-admin .layui-layer-title","{background-color:{{d.color.logo}} !important;}",".layui-nav-tree .layui-this,",".layui-nav-tree .layui-this>a,",".layui-nav-tree .layui-nav-child dd.layui-this,",".layui-nav-tree .layui-nav-child dd.layui-this a","{background-color:{{d.color.selected}} !important;}",".layui-layout-admin .layui-logo","{background-color:{{d.color.logo || d.color.main}} !important;}","{{# if(d.color.header){ }}",".layui-layout-admin .layui-header","{background-color:{{ d.color.header }};}",".layui-layout-admin .layui-header a,",".layui-layout-admin .layui-header a cite","{color: #f8f8f8;}",".layui-layout-admin .layui-header a:hover","{color: #fff;}",".layui-layout-admin .layui-header .layui-nav .layui-nav-more","{border-top-color: #fbfbfb;}",".layui-layout-admin .layui-header .layui-nav .layui-nav-mored","{border-color: transparent; border-bottom-color: #fbfbfb;}",".layui-layout-admin .layui-header .layui-nav .layui-this:after, .layui-layout-admin .layui-header .layui-nav-bar","{background-color: #fff; background-color: rgba(255,255,255,.5);}",".thinkeradmin-pagetabs .layui-tab-title li:after","{display: none;}","{{# } }}","{{# if(layui.tools.rgbIsLight(layui.tools.hexToRgb(d.color.main))){ }}",".layui-nav-itemed>a, .layui-nav-tree .layui-nav-title a, .layui-nav-tree .layui-nav-title a:hover","{color: #000000 !important}",".layui-side-scroll .layui-nav .layui-nav-item a","{color: rgba(0,0,0,0.7)}",".layui-nav .layui-nav-mored, .layui-nav-itemed>a .layui-nav-more","{border-color: transparent transparent rgba(0,0,0,0.7)}",".layui-nav .layui-nav-more","{border-color: rgba(0,0,0,0.7) transparent transparent;border-top-color: rgba(0,0,0,0.7)}",".layui-nav-itemed>.layui-nav-child","{background-color: transparent !important;}",".thinkeradmin-side-shrink .layui-side-menu .layui-nav>.layui-nav-itemed>a","{background: rgba(200,200,200,.3);}",".layui-side-scroll .layui-nav .layui-this a","{color: rgba(255,255,255,0.7)}","{{# } }}"].join("")).render(e),s=document.getElementById(t);"styleSheet"in l?(l.setAttribute("type","text/css"),l.styleSheet.cssText=r):l.innerHTML=r,l.id=t,s&&o[0].removeChild(s),o[0].appendChild(l),o.attr("thinkeradmin-themealias",e.color.alias),layui.session.set("theme",e)},initTheme:function(e){var a=i.theme;e=e||0,a.color[e]?(a.color[e].index=e,h.theme({color:a.color[e]})):i.debug&&console.error("theme index: "+e+" is not found on thinkerAdmin.theme")},resizeFn:{},resize:function(e){var a=layui.router(),i=a.path.join("-");h.resizeFn[i]&&(r.off("resize",h.resizeFn[i]),delete h.resizeFn[i]),"off"!==e&&(e(),h.resizeFn[i]=e,r.on("resize",h.resizeFn[i]))},runResize:function(){var e=layui.router(),a=e.path.join("-");h.resizeFn[a]&&h.resizeFn[a]()},delResize:function(){this.resize("off")},tabsPage:{},tabsBody:function(e){return a(i.container.body).find("."+m).eq(e||0)},tabsBodyChange:function(e,a){a=a||{},h.tabsBody(e).addClass("layui-show").siblings().removeClass("layui-show"),f.rollPage("auto",e),layui.event.call(this,i.eventName,"iframe({*})",a)},closeThisTabs:function(){h.tabsPage.index&&a(i.container.tabheader+">li").eq(h.tabsPage.index).find(".layui-tab-close").trigger("click")},fullScreen:function(){var e=document.documentElement,a=e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullscreen;"undefined"!=typeof a&&a&&a.call(e)},exitFullScreen:function(){document.documentElement;document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()}},f=h.events={flexible:function(e){var a=e.find(i.container.menuIcon),n=a.hasClass(u);h.sideFlexible(!n),h.resizeTableOnWindowChange(350)},refresh:function(){var e=a("."+m).length;h.tabsPage.index>=e&&(h.tabsPage.index=e-1);var i=h.tabsBody(h.tabsPage.index).find(".thinkeradmin-iframe");i[0].contentWindow.location.reload(!0)},theme:function(){layui.view.dialogRight({id:"thinkerAdmin_Theme",success:function(){layui.view.init("#"+this.id).render(i.view.theme)}})},note:function(e){var a=h.screen()<2,i=layui.session.get("note");f.note.index=layui.view.dialog({title:"便签",shade:0,offset:["41px",a?null:e.offset().left-250+"px"],anim:-1,id:"thinkerAdmin_Note",skin:"thinkeradmin-note layui-anim layui-anim-upbit",content:'<textarea placeholder="内容"></textarea>',resize:!1,success:function(e,a){var n=e.find("textarea"),t=void 0===i?"备忘记录":i;n.val(t).focus().on("keyup",function(){layui.session.set("note",this.value)})}})},fullscreen:function(e){var a="layui-icon-screen-full",i="layui-icon-screen-restore",n=e.children("i");n.hasClass(a)?(h.fullScreen(),n.addClass(i).removeClass(a)):(h.exitFullScreen(),n.addClass(a).removeClass(i))},back:function(){history.back()},setTheme:function(e){var a=e.data("index");e.hasClass("layui-this")||(e.addClass("layui-this").siblings(".layui-this").removeClass("layui-this"),h.initTheme(a))},shade:function(){h.sideFlexible()},rollPage:function(e,n){var t=a(i.container.tabheader),l=t.children("li"),r=(t.prop("scrollWidth"),t.outerWidth()),o=parseFloat(t.css("left"));if("left"===e){if(!o&&o<=0)return;var s=-o-r;l.each(function(e,i){var n=a(i),l=n.position().left;if(l>=s)return t.css("left",-l),!1})}else"auto"===e?!function(){var e,i=l.eq(n);if(i[0]){if(e=i.position().left,e<-o)return t.css("left",-e);if(e+i.outerWidth()>=r-o){var s=e+i.outerWidth()-(r-o);l.each(function(e,i){var n=a(i),l=n.position().left;if(l+o>0&&l-o>s)return t.css("left",-l),!1})}}}():l.each(function(e,i){var n=a(i),l=n.position().left;if(l+n.outerWidth()>=r-o)return t.css("left",-l),!1})},leftPage:function(){f.rollPage("left")},rightPage:function(){f.rollPage()},closeThisTabs:function(){var e=parent===self?h:parent.layui.admin;e.closeThisTabs()},closeOtherTabs:function(e){var n="LAY-system-pagetabs-remove";"all"===e?(a(i.container.tabheader+">li:gt(0)").remove(),a(i.container.body).find("."+m+":gt(0)").remove(),a(i.container.tabheader+">li").eq(0).trigger("click")):(a(i.container.tabheader+">li").each(function(e,i){e&&e!=h.tabsPage.index&&(a(i).addClass(n),h.tabsBody(e).addClass(n))}),a("."+n).remove())},closeAllTabs:function(){f.closeOtherTabs("all")}};!function(){var e=layui.session.get("theme");e?h.theme(e):i.theme&&h.initTheme(i.theme.initColorIndex),o.addClass("layui-layout-body"),l.ie&&l.ie<10&&layui.view.error("IE"+l.ie+"下访问可能不佳，推荐使用：Chrome / Firefox / Edge 等高级浏览器",{offset:"auto",id:"LAY_errorIE"})}(),t.on("tab(thinkeradmin-layout-tabs)",function(e){h.tabsPage.index=e.index}),h.on("tabsPage(setMenustatus)",function(e){var n=e.path,t=a(i.container.menu),l="layui-nav-itemed",r=function(e){return{list:e.children(".layui-nav-child"),name:e.data("name"),jump:e.data("jump")}},o=function(e){var i=layui.tools.makeSpaUrl(n.join("/"));e.each(function(e,t){var o=a(t),s=r(o),u=s.list.children("dd"),d=n[0]===s.name||0===e&&!n[0]||s.jump&&i===layui.tools.makeSpaUrl(s.jump);if(u.each(function(e,t){var o=a(t),u=r(o),d=u.list.children("dd"),c=n[0]===s.name&&n[1]===u.name||u.jump&&i===layui.tools.makeSpaUrl(u.jump);if(d.each(function(e,t){var o=a(t),d=r(o),c=n[0]===s.name&&n[1]===u.name&&n[2]===d.name||d.jump&&i===layui.tools.makeSpaUrl(d.jump);if(c){var y=d.list[0]?l:"layui-this";return o.addClass(y).siblings().removeClass(y),!1}}),c){var y=u.list[0]?l:"layui-this";return o.addClass(y).siblings().removeClass(y),!1}}),d){var c=s.list[0]?l:"layui-this";return o.addClass(c).siblings().removeClass(c),!1}})};t.find(".layui-this").removeClass("layui-this"),h.screen()<2&&h.sideFlexible(),o(t.children("li"))}),t.on("nav(thinkeradmin-side-menu)",function(e){e.siblings(".layui-nav-child")[0]&&s.hasClass(y)&&(h.sideFlexible(1),layer.close(e.data("index"))),h.tabsPage.type="nav"});var v=function(e){var a=(e.attr("lay-id"),e.attr("lay-attr")),i=e.index();h.tabsBodyChange(i,{url:a})};o.on("click",i.container.tabheader+">li",function(){var e=a(this),i=e.index();h.tabsPage.type="tab",h.tabsPage.index=i,v(e)}),t.on("tabDelete(thinkeradmin-layout-tabs)",function(e){var i=a("thinkeradmin-layout-tabs .layui-this");e.index&&h.tabsBody(e.index).remove(),v(i),h.delResize()}),o.on("click","*[thinker-href]",function(){var e=a(this),i=e.attr("thinker-href"),n=e.attr("thinker-text");layui.router();h.tabsPage.elem=e;var t=parent===self?layui:top.layui;t.index.render(i,n||e.text())}),o.on("click","*[thinkeradmin-event]",function(){var e=a(this),i=e.attr("thinkeradmin-event");f[i]&&f[i].call(this,e)}),o.on("mouseenter","*[lay-tips]",function(){var e=a(this);if(!e.parent().hasClass("layui-nav-item")||s.hasClass(y)){var i=e.attr("lay-tips"),n=e.attr("lay-offset"),t=e.attr("lay-direction"),l=layer.tips(i,this,{tips:t||1,time:-1,success:function(e,a){n&&e.css("margin-left",n+"px")}});e.data("index",l)}}).on("mouseleave","*[lay-tips]",function(){layer.close(a(this).data("index"))});var b=layui.data.resizeSystem=function(){layer.closeAll("tips"),b.lock||setTimeout(function(){h.sideFlexible(!(h.screen()<2)),delete b.lock},100),b.lock=!0};r.on("resize",layui.data.resizeSystem),e("admin",h)});